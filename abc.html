<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>shathe achi.com</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F3F4F6;
        }

        /* Custom scrollbar for better aesthetics */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #E5E7EB;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background-color: #9CA3AF;
            border-radius: 10px;
        }
        .cart-icon-container:hover .cart-badge {
            animation: pulse-badge 1s infinite;
        }
        @keyframes pulse-badge {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        /* Sidebar animation classes */
        .cart-sidebar {
            transform: translateX(100%);
            transition: transform 0.4s ease-in-out;
        }
        .cart-sidebar.open {
            transform: translateX(0);
        }
        .left-sidebar {
            transform: translateX(-100%);
            transition: transform 0.4s ease-in-out;
        }
        .left-sidebar.open {
            transform: translateX(0);
        }
        .backdrop {
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
        }
        .backdrop.open {
            opacity: 1;
            visibility: visible;
        }

        /* Modal classes */
        .modal {
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
        }
        .modal.open {
            visibility: visible;
            opacity: 1;
        }
        .chatbot-bubble {
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            transition: transform 0.2s ease-in-out;
        }
        .chatbot-bubble:hover {
            transform: scale(1.1);
        }
        .chatbot-container {
            transform: scale(0.8);
            transform-origin: bottom right;
            opacity: 0;
            visibility: hidden;
            transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
        }
        .chatbot-container.open {
            transform: scale(1);
            opacity: 1;
            visibility: visible;
        }
        .chatbot-message.user {
            background-color: #3b82f6;
            color: white;
            border-radius: 1.2rem 1.2rem 0.2rem 1.2rem;
            margin-left: auto;
        }
        .chatbot-message.bot {
            background-color: #e5e7eb;
            color: #1f2937;
            border-radius: 1.2rem 1.2rem 1.2rem 0.2rem;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <!-- Header -->
    <header class="sticky top-0 z-50 bg-white shadow-lg p-4 sm:p-6 flex justify-between items-center rounded-b-xl border-b border-gray-200">
        <div class="flex items-center gap-4">
            <!-- Left sidebar toggle button -->
            <button id="menu-icon" class="p-2 rounded-full hover:bg-gray-100 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                </svg>
            </button>
            <h1 class="text-xl sm:text-2xl font-bold text-gray-900">shathe achi.com</h1>
        </div>
        
        <!-- Cart icon -->
        <div id="cart-icon" class="relative cart-icon-container cursor-pointer p-2 rounded-full hover:bg-gray-100 transition-all">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.182 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
            </svg>
            <span id="cart-badge" class="absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 bg-red-600 rounded-full transform translate-x-1/2 -translate-y-1/2">0</span>
        </div>
    </header>

    <!-- Main Content & Dashboard Container -->
    <div id="main-container" class="container mx-auto p-4 sm:p-6 lg:p-8">
        <!-- Main Content Section (Default) -->
        <div id="main-content">
            <!-- Hero Section -->
            <section class="relative bg-white rounded-3xl overflow-hidden shadow-md border border-gray-200 mb-8 p-8 sm:p-12 text-center text-gray-900">
                <div class="absolute inset-0 bg-cover bg-center opacity-20" style="background-image: url('https://images.unsplash.com/photo-1528699042239-08a68c07e997?ixlib=rb-1.2.1&auto=format&fit=crop&w=1950&q=80');"></div>
                <div class="relative z-10">
                    <h2 class="text-3xl sm:text-5xl font-bold mb-4">Discover Your Style</h2>
                    <p class="text-base sm:text-lg mb-6 max-w-2xl mx-auto">
                        Explore our curated collection of minimalist designs and essential goods for a simple yet elegant life.
                    </p>
                    <button class="bg-indigo-600 text-white font-semibold py-3 px-8 rounded-full hover:bg-indigo-700 transition-colors shadow-lg">
                        Shop Now
                    </button>
                </div>
            </section>

            <!-- Products Section -->
            <section class="bg-white p-6 sm:p-8 rounded-2xl shadow-md border border-gray-200">
                <h2 class="text-2xl font-semibold mb-6 text-gray-900">Featured Products</h2>
                <div id="products-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                    <!-- Product cards will be dynamically inserted here -->
                </div>
            </section>
        </div>

        <!-- Admin Dashboard Section (Initially Hidden) -->
        <div id="admin-dashboard" class="hidden">
            <h2 class="text-3xl font-bold text-gray-900 mb-6">Admin Dashboard</h2>

            <!-- Dashboard Tabs -->
            <div class="flex border-b border-gray-200 mb-6">
                <button id="products-tab-btn" class="py-2 px-4 font-medium text-center text-indigo-600 border-b-2 border-indigo-600 transition-colors duration-300 ease-in-out">Products</button>
                <button id="orders-tab-btn" class="py-2 px-4 font-medium text-center text-gray-500 hover:text-indigo-600 border-b-2 border-transparent hover:border-indigo-600 transition-colors duration-300 ease-in-out">Orders</button>
            </div>
            
            <!-- Products Management Tab -->
            <div id="products-tab-content">
                <!-- Dashboard Stats -->
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8">
                    <div class="bg-white p-6 rounded-2xl shadow-md border border-gray-200">
                        <p class="text-sm font-medium text-gray-500">Total Products</p>
                        <p id="total-products" class="text-3xl font-bold text-gray-900 mt-1">0</p>
                    </div>
                    <div class="bg-white p-6 rounded-2xl shadow-md border border-gray-200">
                        <p class="text-sm font-medium text-gray-500">Unique Categories</p>
                        <p id="total-categories" class="text-3xl font-bold text-gray-900 mt-1">0</p>
                    </div>
                </div>

                <!-- Product Form -->
                <div class="bg-white p-6 sm:p-8 rounded-2xl shadow-md border border-gray-200 mb-8">
                    <h3 id="form-title" class="text-xl font-semibold mb-4">Add New Product</h3>
                    <form id="product-form" class="space-y-4">
                        <input type="hidden" id="product-id">
                        <div>
                            <label for="product-name" class="block text-sm font-medium text-gray-700">Product Name</label>
                            <input type="text" id="product-name" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                        </div>
                        <div>
                            <label for="product-price" class="block text-sm font-medium text-gray-700">Price</label>
                            <input type="number" id="product-price" step="0.01" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                        </div>
                        <div>
                            <label for="product-category" class="block text-sm font-medium text-gray-700">Category</label>
                            <select id="product-category" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                                <option value="Apparel">Apparel</option>
                                <option value="Accessories">Accessories</option>
                                <option value="Electronics">Electronics</option>
                                <option value="Footwear">Footwear</option>
                            </select>
                        </div>
                        <div>
                            <label for="product-image" class="block text-sm font-medium text-gray-700">Image URL</label>
                            <input type="text" id="product-image" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                        </div>
                        <button type="submit" id="form-button" class="w-full py-2 px-4 bg-green-600 text-white rounded-md font-semibold hover:bg-green-700 transition-colors">Add Product</button>
                    </form>
                </div>

                <!-- Products List Table -->
                <div class="bg-white p-6 sm:p-8 rounded-2xl shadow-md border border-gray-200">
                    <h3 class="text-xl font-semibold mb-4">Current Products</h3>
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Image</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Product Name</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Category</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Price</th>
                                    <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="admin-products-table-body" class="bg-white divide-y divide-gray-200">
                                <!-- Products will be rendered here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Orders Management Tab -->
            <div id="orders-tab-content" class="hidden">
                 <!-- Order Stats -->
                <div class="bg-white p-6 rounded-2xl shadow-md border border-gray-200 mb-8">
                    <p class="text-sm font-medium text-gray-500">Total Orders</p>
                    <p id="total-orders" class="text-3xl font-bold text-gray-900 mt-1">0</p>
                </div>
                <div class="bg-white p-6 sm:p-8 rounded-2xl shadow-md border border-gray-200">
                    <h3 class="text-xl font-semibold mb-4">Customer Orders</h3>
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Order ID</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Customer</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Total</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                    <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="admin-orders-table-body" class="bg-white divide-y divide-gray-200">
                                <!-- Orders will be rendered here -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <button id="logout-btn" class="mt-6 w-full py-2 px-4 bg-red-600 text-white rounded-md font-semibold hover:bg-red-700 transition-colors">Back to Store</button>
        </div>
    </div>
    
    <!-- Left Navigation Sidebar -->
    <div id="left-sidebar" class="left-sidebar fixed top-0 left-0 w-full sm:w-80 h-full bg-gray-50 shadow-xl z-50 flex flex-col p-6 sm:p-8 overflow-y-auto">
        <div class="flex justify-between items-center pb-4 mb-6 border-b border-gray-200">
            <h2 class="text-2xl font-semibold text-gray-900">Menu</h2>
            <button id="close-menu-btn" class="text-gray-500 hover:text-gray-700 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </div>
        <nav class="flex-grow space-y-4">
            <a href="#" class="nav-link flex items-center gap-4 p-3 rounded-xl hover:bg-gray-200 transition-colors" data-filter="all">
                <div class="w-10 h-10 rounded-full flex items-center justify-center bg-gradient-to-br from-indigo-500 to-purple-600 text-white shadow-md">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                    </svg>
                </div>
                <span class="font-medium text-gray-700">Shop All</span>
            </a>
            <hr class="border-t border-gray-300 my-4">
            <h3 class="text-sm font-semibold text-gray-500 uppercase px-3">Categories</h3>
            <a href="#" class="nav-link flex items-center gap-4 p-3 rounded-xl hover:bg-gray-200 transition-colors" data-filter="Apparel">
                <div class="w-10 h-10 rounded-full flex items-center justify-center bg-gradient-to-br from-green-400 to-blue-500 text-white shadow-md">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                    </svg>
                </div>
                <span class="font-medium text-gray-700">Apparel</span>
            </a>
            <a href="#" class="nav-link flex items-center gap-4 p-3 rounded-xl hover:bg-gray-200 transition-colors" data-filter="Accessories">
                <div class="w-10 h-10 rounded-full flex items-center justify-center bg-gradient-to-br from-yellow-400 to-orange-500 text-white shadow-md">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v2a2 2 0 01-2 2H5a2 2 0 01-2-2v-2a2 2 0 012-2m14 0V9m-6 6v3m4-3v3m-8-6v3m0-3v3m0-3h.01M16 9v-.01M16 15v-.01M8 9v-.01M8 15v-.01" />
                    </svg>
                </div>
                <span class="font-medium text-gray-700">Accessories</span>
            </a>
            <a href="#" class="nav-link flex items-center gap-4 p-3 rounded-xl hover:bg-gray-200 transition-colors" data-filter="Electronics">
                <div class="w-10 h-10 rounded-full flex items-center justify-center bg-gradient-to-br from-red-500 to-pink-600 text-white shadow-md">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L12 12l2.25 5m-4.5-5H12M9 12h6" />
                    </svg>
                </div>
                <span class="font-medium text-gray-700">Electronics</span>
            </a>
            <a href="#" class="nav-link flex items-center gap-4 p-3 rounded-xl hover:bg-gray-200 transition-colors" data-filter="Footwear">
                <div class="w-10 h-10 rounded-full flex items-center justify-center bg-gradient-to-br from-purple-500 to-fuchsia-600 text-white shadow-md">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm0 18a8 8 0 100-16 8 8 0 000 16z" />
                    </svg>
                </div>
                <span class="font-medium text-gray-700">Footwear</span>
            </a>
            <hr class="border-t border-gray-300 my-4">
            <a href="#" id="customer-support-link" class="flex items-center gap-4 p-3 rounded-xl hover:bg-gray-200 transition-colors">
                <div class="w-10 h-10 rounded-full flex items-center justify-center bg-gradient-to-br from-blue-500 to-sky-600 text-white shadow-md">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
                    </svg>
                </div>
                <span class="font-medium text-gray-700">Customer Support</span>
            </a>
            <a href="#" id="admin-dashboard-link" class="flex items-center gap-4 p-3 rounded-xl hover:bg-gray-200 transition-colors">
                <div class="w-10 h-10 rounded-full flex items-center justify-center bg-gradient-to-br from-gray-500 to-gray-700 text-white shadow-md">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.608 3.292 0z" />
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                    </svg>
                </div>
                <span class="font-medium text-gray-700">Admin Dashboard</span>
            </a>
        </nav>
    </div>

    <!-- Cart Sidebar -->
    <div id="cart-sidebar" class="cart-sidebar fixed top-0 right-0 w-full sm:w-96 h-full bg-white shadow-xl z-50 flex flex-col p-6 sm:p-8">
        <div class="flex justify-between items-center pb-4 border-b border-gray-200">
            <h2 class="text-2xl font-semibold text-gray-900">Your Cart</h2>
            <button id="close-cart-btn" class="text-gray-500 hover:text-gray-700 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </div>
        <div id="cart-items" class="flex-grow flex flex-col gap-4 overflow-y-auto py-4">
            <!-- Cart items will be dynamically inserted here -->
        </div>
        <div class="border-t pt-4">
            <div class="flex justify-between items-center text-lg font-semibold text-gray-900">
                <span>Total:</span>
                <span id="cart-total">৳0.00</span>
            </div>
            <button id="checkout-button" class="w-full mt-6 py-3 bg-indigo-600 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                Proceed to Checkout
            </button>
        </div>
    </div>

    <!-- Backdrop for sidebars and modals -->
    <div id="backdrop" class="backdrop fixed inset-0 bg-gray-900 opacity-0 transition-opacity z-40"></div>

    <!-- Admin Login Modal -->
    <div id="admin-modal" class="modal fixed inset-0 z-[60] flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl p-6 sm:p-8 max-w-sm w-full relative transform scale-95 transition-transform">
            <button id="close-admin-modal" class="absolute top-3 right-3 text-gray-400 hover:text-gray-600 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <h3 class="text-2xl font-bold mb-4 text-center">Admin Login</h3>
            <p class="text-sm text-gray-500 mb-6 text-center">
                Enter the password to access the admin dashboard.
            </p>
            <form id="admin-login-form" class="space-y-4">
                <input type="password" id="admin-password" class="w-full rounded-lg border-gray-300 shadow-sm px-4 py-2 focus:border-indigo-500 focus:ring-indigo-500" placeholder="Password" required>
                <button type="submit" class="w-full py-2 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 transition-colors">Log In</button>
            </form>
            <p id="login-error" class="text-red-500 text-center text-sm mt-4 hidden">Incorrect password. Please try again.</p>
        </div>
    </div>
    
    <!-- Checkout Modal -->
    <div id="checkout-modal" class="modal fixed inset-0 z-[60] flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl p-6 sm:p-8 max-w-md w-full relative overflow-y-auto max-h-[90vh] transform scale-95 transition-transform">
            <button id="close-checkout-modal" class="absolute top-3 right-3 text-gray-400 hover:text-gray-600 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <h3 class="text-2xl font-bold mb-4 text-center">Checkout</h3>
            <p class="text-sm text-gray-500 mb-6 text-center">Please fill out your details to complete your order.</p>
            <form id="checkout-form" class="space-y-4">
                <div>
                    <label for="customer-name" class="block text-sm font-medium text-gray-700">Full Name</label>
                    <input type="text" id="customer-name" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                </div>
                <div>
                    <label for="customer-email" class="block text-sm font-medium text-gray-700">Email Address</label>
                    <input type="email" id="customer-email" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                </div>
                <div>
                    <label for="customer-phone" class="block text-sm font-medium text-gray-700">Phone Number</label>
                    <input type="tel" id="customer-phone" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                </div>
                <div>
                    <label for="customer-address" class="block text-sm font-medium text-gray-700">Billing Address</label>
                    <input type="text" id="customer-address" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                </div>
                <div>
                    <label for="customer-country" class="block text-sm font-medium text-gray-700">Country</label>
                    <select id="customer-country" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"></select>
                </div>

                <!-- Payment Options -->
                <div class="pt-4 border-t border-gray-200">
                    <h4 class="text-md font-medium text-gray-700 mb-2">Payment Method</h4>
                    <div class="space-y-2">
                        <label class="flex items-center gap-2">
                            <input type="radio" name="payment-method" value="credit-card" checked class="text-indigo-600 focus:ring-indigo-500">
                            <span class="font-medium text-gray-900">Credit/Debit Card</span>
                        </label>
                        <label class="flex items-center gap-2">
                            <input type="radio" name="payment-method" value="digital-wallet" class="text-indigo-600 focus:ring-indigo-500">
                            <span class="font-medium text-gray-900">Digital Wallet (bKash, Nagad)</span>
                        </label>
                        <label class="flex items-center gap-2">
                            <input type="radio" name="payment-method" value="cash-on-delivery" class="text-indigo-600 focus:ring-indigo-500">
                            <span class="font-medium text-gray-900">Cash on Delivery</span>
                        </label>
                    </div>
                </div>

                <!-- Credit Card Form (Initially Hidden) -->
                <div id="credit-card-form" class="mt-4 space-y-4">
                    <div>
                        <label for="card-number" class="block text-sm font-medium text-gray-700">Card Number</label>
                        <input type="text" id="card-number" pattern="[0-9]{16}" inputmode="numeric" placeholder="XXXX-XXXX-XXXX-XXXX" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label for="card-expiry" class="block text-sm font-medium text-gray-700">Expiry (MM/YY)</label>
                            <input type="text" id="card-expiry" pattern="(0[1-9]|1[0-2])\/[0-9]{2}" placeholder="MM/YY" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                        </div>
                        <div>
                            <label for="card-cvc" class="block text-sm font-medium text-gray-700">CVC</label>
                            <input type="text" id="card-cvc" pattern="[0-9]{3,4}" placeholder="CVC" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                        </div>
                    </div>
                </div>

                <button type="submit" id="place-order-button" class="w-full py-2 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 transition-colors">Place Order</button>
            </form>
        </div>
    </div>
    
    <!-- Order Confirmation Modal -->
    <div id="order-confirm-modal" class="modal fixed inset-0 z-[60] flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl p-6 sm:p-8 max-w-md w-full relative transform scale-95 transition-transform">
            <h3 class="text-2xl font-bold mb-4 text-center text-green-600">Order Placed!</h3>
            <p class="text-center text-gray-600 mb-6">Thank you for your order. Your order details are below. You will receive an email confirmation shortly.</p>
            <div id="order-summary" class="bg-gray-50 p-4 rounded-xl space-y-2">
                <!-- Order details will be dynamically inserted here -->
            </div>
            <button id="close-order-confirm-modal" class="w-full py-2 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 transition-colors mt-6">Back to Shopping</button>
        </div>
    </div>
    
    <!-- Order Details Modal -->
    <div id="order-details-modal" class="modal fixed inset-0 z-[60] flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl p-6 sm:p-8 max-w-xl w-full relative transform scale-95 transition-transform">
            <button id="close-order-details-modal" class="absolute top-3 right-3 text-gray-400 hover:text-gray-600 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <h3 class="text-2xl font-bold mb-4 text-center">Order Details</h3>
            <div id="order-details-content" class="space-y-4">
                <!-- Order details will be dynamically inserted here -->
            </div>
        </div>
    </div>
    
    <!-- Product Details Modal -->
    <div id="product-details-modal" class="modal fixed inset-0 z-[60] flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl p-6 sm:p-8 max-w-lg w-full relative transform scale-95 transition-transform">
            <button id="close-product-details-modal" class="absolute top-3 right-3 text-gray-400 hover:text-gray-600 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <div class="flex flex-col sm:flex-row gap-6 items-center">
                <div class="sm:w-1/2">
                    <img id="product-details-image" src="" alt="" class="w-full h-auto object-cover rounded-xl">
                </div>
                <div class="sm:w-1/2 flex flex-col items-center sm:items-start text-center sm:text-left">
                    <h3 id="product-details-name" class="text-3xl font-bold text-gray-900 mb-2"></h3>
                    <p id="product-details-price" class="text-xl font-medium text-indigo-600 mb-4"></p>
                    <p id="product-details-description" class="text-gray-600 mb-6"></p>
                    <button id="add-to-cart-from-modal-btn" data-id="" class="w-full sm:w-auto py-3 px-6 bg-indigo-600 text-white rounded-lg font-semibold hover:bg-indigo-700 transition-colors">
                        Add to Cart
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Customer Support Modal -->
    <div id="support-modal" class="modal fixed inset-0 z-[60] flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl p-6 sm:p-8 max-w-2xl w-full relative overflow-y-auto max-h-[90vh] transform scale-95 transition-transform">
            <button id="close-support-modal" class="absolute top-3 right-3 text-gray-400 hover:text-gray-600 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <h3 class="text-2xl font-bold mb-4 text-center">Customer Support</h3>
            <div class="flex border-b border-gray-200 mb-6">
                <button id="contact-tab-btn" class="py-2 px-4 font-medium text-center text-gray-500 hover:text-indigo-600 border-b-2 border-transparent hover:border-indigo-600 transition-colors duration-300 ease-in-out">Contact Us</button>
                <button id="faq-tab-btn" class="py-2 px-4 font-medium text-center text-gray-500 hover:text-indigo-600 border-b-2 border-transparent hover:border-indigo-600 transition-colors duration-300 ease-in-out">FAQs</button>
                <button id="tracking-tab-btn" class="py-2 px-4 font-medium text-center text-indigo-600 border-b-2 border-indigo-600 transition-colors duration-300 ease-in-out">Order Tracking & Returns</button>
            </div>
            <div id="contact-tab-content" class="hidden">
                <p class="text-center text-gray-600 mb-6">Send us a message and we'll get back to you as soon as possible!</p>
                <form id="contact-form" class="space-y-4">
                    <div>
                        <label for="contact-name" class="block text-sm font-medium text-gray-700">Your Name</label>
                        <input type="text" id="contact-name" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                    </div>
                    <div>
                        <label for="contact-email" class="block text-sm font-medium text-gray-700">Your Email</label>
                        <input type="email" id="contact-email" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                    </div>
                    <div>
                        <label for="contact-message" class="block text-sm font-medium text-gray-700">Message</label>
                        <textarea id="contact-message" rows="4" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"></textarea>
                    </div>
                    <button type="submit" class="w-full py-2 bg-indigo-600 text-white font-semibold rounded-lg hover:bg-indigo-700 transition-colors">Send Message</button>
                </form>
            </div>
            <div id="faq-tab-content" class="hidden">
                <div class="space-y-4">
                    <div class="border border-gray-200 rounded-lg overflow-hidden">
                        <button class="faq-question flex justify-between items-center w-full px-4 py-3 bg-gray-50 hover:bg-gray-100 transition-colors">
                            <span class="font-semibold text-left">How do I track my order?</span>
                            <span class="text-xl">+</span>
                        </button>
                        <div class="faq-answer hidden px-4 py-3 bg-white text-gray-700">
                            You can track your order by logging into the Admin Dashboard with the password `admin123`. There you can see the status of all orders. We'll send you an email with tracking info when your order ships!
                        </div>
                    </div>
                    <div class="border border-gray-200 rounded-lg overflow-hidden">
                        <button class="faq-question flex justify-between items-center w-full px-4 py-3 bg-gray-50 hover:bg-gray-100 transition-colors">
                            <span class="font-semibold text-left">What is your return policy?</span>
                            <span class="text-xl">+</span>
                        </button>
                        <div class="faq-answer hidden px-4 py-3 bg-white text-gray-700">
                            We offer a 30-day return policy on all unused products. Please contact us to initiate a return.
                        </div>
                    </div>
                    <div class="border border-gray-200 rounded-lg overflow-hidden">
                        <button class="faq-question flex justify-between items-center w-full px-4 py-3 bg-gray-50 hover:bg-gray-100 transition-colors">
                            <span class="font-semibold text-left">How can I change my shipping address?</span>
                            <span class="text-xl">+</span>
                        </button>
                        <div class="faq-answer hidden px-4 py-3 bg-white text-gray-700">
                            Please send us a message through the Contact Us form with your order number and the new address. We will do our best to update it before it ships.
                        </div>
                    </div>
                </div>
            </div>
            <div id="tracking-tab-content" class="space-y-4">
                <h4 class="font-semibold text-lg">Order Tracking</h4>
                <p class="text-gray-600 text-sm">Enter your order ID below to check its status.</p>
                <form id="order-tracking-form" class="flex gap-2">
                    <input type="text" id="tracking-id-input" placeholder="Enter Order ID (e.g., ORD-001)" required class="flex-1 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                    <button type="submit" class="p-2 bg-indigo-600 text-white rounded-md font-semibold hover:bg-indigo-700 transition-colors">Track Order</button>
                </form>
                <div id="tracking-result" class="mt-4 p-4 rounded-md bg-gray-50 border border-gray-200 hidden">
                    <!-- Tracking results will be displayed here -->
                </div>
                
                <h4 class="font-semibold text-lg mt-8">Returns Policy</h4>
                <div class="text-gray-700 text-sm space-y-2">
                    <p>We believe in our products and want you to be completely satisfied with your purchase. Our generous **30-day return policy** ensures you can shop with confidence.</p>
                    <p>You can return any unused and undamaged item within **30 days** of receiving your order for a full refund or exchange. To initiate a return, please contact our support team with your order ID and reason for return. We will guide you through the process, including shipping and refund details.</p>
                    <p>Items must be returned in their original packaging and condition. Used or damaged items are not eligible for a return.</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Confirmation Modal (for Delete) -->
    <div id="confirm-modal" class="modal fixed inset-0 z-[60] flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl p-6 sm:p-8 max-w-sm w-full relative transform scale-95 transition-transform">
            <h3 class="text-xl font-bold mb-4 text-center">Confirm Deletion</h3>
            <p class="text-center text-gray-600 mb-6">Are you sure you want to delete this product? This action cannot be undone.</p>
            <div class="flex gap-4">
                <button id="confirm-delete-btn" class="flex-1 py-2 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 transition-colors">Delete</button>
                <button id="cancel-delete-btn" class="flex-1 py-2 bg-gray-200 text-gray-800 font-semibold rounded-lg hover:bg-gray-300 transition-colors">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Live Chatbot Bubble and Container -->
    <button id="chatbot-bubble" class="fixed bottom-6 right-6 z-50 w-16 h-16 rounded-full bg-indigo-600 flex items-center justify-center text-white chatbot-bubble cursor-pointer">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zm-4 0h-2v2h2V9z" clip-rule="evenodd" />
        </svg>
    </button>
    <div id="chatbot-container" class="chatbot-container fixed bottom-24 right-6 z-50 w-full max-w-sm h-96 bg-white rounded-xl shadow-lg border border-gray-200 flex flex-col">
        <div class="bg-indigo-600 p-4 rounded-t-xl flex justify-between items-center text-white">
            <h4 class="font-bold">Live Chat</h4>
            <button id="close-chatbot-btn">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </div>
        <div id="chatbot-messages" class="flex-1 p-4 overflow-y-auto space-y-4">
            <!-- Chat messages will be added here -->
            <div class="chatbot-message bot p-3 max-w-[80%]">Hello there! I'm your virtual assistant. How can I help you today?</div>
        </div>
        <div class="p-4 border-t border-gray-200">
            <form id="chatbot-form" class="flex gap-2">
                <input type="text" id="chatbot-input" placeholder="Type your message..." class="flex-1 rounded-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 text-sm">
                <button type="submit" class="p-3 bg-indigo-600 text-white rounded-full">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z" />
                    </svg>
                </button>
            </form>
        </div>
    </div>
    

    <!-- JavaScript for E-commerce Logic -->
    <script>
        // Mock product data - all prices converted to Bangladeshi Taka (BDT) and added description
        let products = [
            { id: 1, name: 'Minimalist Hoodie', price: 5498.90, category: 'Apparel', image: 'https://placehold.co/400x400/FFD1DC/000?text=Hoodie', description: 'A comfortable and stylish hoodie, perfect for everyday wear. Made from a soft, breathable cotton blend.' },
            { id: 2, name: 'Essential T-Shirt', price: 2805.00, category: 'Apparel', image: 'https://placehold.co/400x400/96D7F6/000?text=T-Shirt', description: 'The perfect foundation for any outfit. Our classic t-shirt offers a relaxed fit and is made from 100% organic cotton.' },
            { id: 3, name: 'Stylish Backpack', price: 9350.00, category: 'Accessories', image: 'https://placehold.co/400x400/C1B1E1/000?text=Backpack', description: 'Carry your essentials in style. This durable and sleek backpack features multiple compartments for all your needs.' },
            { id: 4, name: 'High-Top Sneakers', price: 13200.00, category: 'Footwear', image: 'https://placehold.co/400x400/A0D2A6/000?text=Sneakers', description: 'Elevate your casual look with these trendy high-top sneakers. Designed for comfort and style, they are a must-have.' },
            { id: 5, name: 'Casual Denim Jacket', price: 10450.00, category: 'Apparel', image: 'https://placehold.co/400x400/F5A623/000?text=Jacket', description: 'A timeless piece for any wardrobe. This denim jacket is versatile and durable, perfect for all seasons.' },
            { id: 6, name: 'Sporty Cap', price: 1732.50, category: 'Accessories', image: 'https://placehold.co/400x400/E3E3E3/000?text=Cap', description: 'Complete your athletic or casual look with this classic sporty cap. It offers great sun protection and a comfortable fit.' },
            { id: 7, name: 'Classic Sunglasses', price: 6600.00, category: 'Accessories', image: 'https://placehold.co/400x400/7C7C7C/fff?text=Sunglasses', description: 'Protect your eyes with style. These classic sunglasses feature UV protection and a sleek, modern design.' },
            { id: 8, name: 'Leather Wallet', price: 4400.00, category: 'Accessories', image: 'https://placehold.co/400x400/987D7C/000?text=Wallet', description: 'Crafted from premium leather, this wallet is both elegant and functional. It has multiple card slots and a spacious bill compartment.' },
            { id: 9, name: 'Wireless Headphones', price: 21998.90, category: 'Electronics', image: 'https://placehold.co/400x400/506D67/fff?text=Headphones', description: 'Experience immersive audio with these wireless headphones. They feature noise cancellation and a long-lasting battery.' },
            { id: 10, name: 'Smartwatch', price: 27500.00, category: 'Electronics', image: 'https://placehold.co/400x400/999999/fff?text=Smartwatch', description: 'Stay connected and track your fitness goals with this stylish smartwatch. It features a bright display and a durable design.' },
        ];
        
        // Simulating a database for orders
        let orders = [
            {
                id: 'ORD-001',
                customer: {
                    name: 'John Doe',
                    email: 'john.doe@example.com',
                    phone: '555-1234',
                    address: '123 Main St, Anytown',
                    country: 'United States'
                },
                items: [{ ...products[0], quantity: 2 }],
                total: 10997.80,
                status: 'Confirmed',
                paymentMethod: 'Credit Card',
                date: '2025-09-06'
            },
             {
                id: 'ORD-002',
                customer: {
                    name: 'Jane Smith',
                    email: 'jane.smith@example.com',
                    phone: '555-5678',
                    address: '456 Elm St, Othertown',
                    country: 'Bangladesh'
                },
                items: [{ ...products[1], quantity: 1 }, { ...products[2], quantity: 1 }],
                total: 12155.00,
                status: 'Pending',
                paymentMethod: 'Cash on Delivery',
                date: '2025-09-06'
            },
        ];
        
        let cart = [];
        let editingProductId = null;
        let lastOrderId = orders.length > 0 ? Math.max(...orders.map(o => parseInt(o.id.split('-')[1]))) : 0;
        let activeOrderDetailsId = null;

        // DOM element references
        const mainContent = document.getElementById('main-content');
        const adminDashboard = document.getElementById('admin-dashboard');
        const productsGrid = document.getElementById('products-grid');
        const cartItemsContainer = document.getElementById('cart-items');
        const cartTotal = document.getElementById('cart-total');
        const cartBadge = document.getElementById('cart-badge');
        const checkoutButton = document.getElementById('checkout-button');
        const cartIcon = document.getElementById('cart-icon');
        const cartSidebar = document.getElementById('cart-sidebar');
        const closeCartBtn = document.getElementById('close-cart-btn');
        const menuIcon = document.getElementById('menu-icon');
        const leftSidebar = document.getElementById('left-sidebar');
        const closeMenuBtn = document.getElementById('close-menu-btn');
        const backdrop = document.getElementById('backdrop');
        const navLinks = document.querySelectorAll('.nav-link');
        const adminDashboardLink = document.getElementById('admin-dashboard-link');
        const adminModal = document.getElementById('admin-modal');
        const closeAdminModal = document.getElementById('close-admin-modal');
        const adminLoginForm = document.getElementById('admin-login-form');
        const adminPasswordInput = document.getElementById('admin-password');
        const loginError = document.getElementById('login-error');
        const formTitle = document.getElementById('form-title');
        const productForm = document.getElementById('product-form');
        const formButton = document.getElementById('form-button');
        const logoutBtn = document.getElementById('logout-btn');
        const adminProductsTableBody = document.getElementById('admin-products-table-body');
        const totalProductsEl = document.getElementById('total-products');
        const totalCategoriesEl = document.getElementById('total-categories');
        const confirmModal = document.getElementById('confirm-modal');
        const confirmDeleteBtn = document.getElementById('confirm-delete-btn');
        const cancelDeleteBtn = document.getElementById('cancel-delete-btn');
        const checkoutModal = document.getElementById('checkout-modal');
        const closeCheckoutModal = document.getElementById('close-checkout-modal');
        const checkoutForm = document.getElementById('checkout-form');
        const orderConfirmModal = document.getElementById('order-confirm-modal');
        const closeOrderConfirmModal = document.getElementById('close-order-confirm-modal');
        const orderSummaryEl = document.getElementById('order-summary');
        const productsTabBtn = document.getElementById('products-tab-btn');
        const ordersTabBtn = document.getElementById('orders-tab-btn');
        const productsTabContent = document.getElementById('products-tab-content');
        const ordersTabContent = document.getElementById('orders-tab-content');
        const adminOrdersTableBody = document.getElementById('admin-orders-table-body');
        const totalOrdersEl = document.getElementById('total-orders');
        const orderDetailsModal = document.getElementById('order-details-modal');
        const closeOrderDetailsModal = document.getElementById('close-order-details-modal');
        const orderDetailsContent = document.getElementById('order-details-content');
        const customerCountrySelect = document.getElementById('customer-country');
        const productDetailsModal = document.getElementById('product-details-modal');
        const closeProductDetailsModal = document.getElementById('close-product-details-modal');
        const productDetailsImage = document.getElementById('product-details-image');
        const productDetailsName = document.getElementById('product-details-name');
        const productDetailsPrice = document.getElementById('product-details-price');
        const productDetailsDescription = document.getElementById('product-details-description');
        const addToCartFromModalBtn = document.getElementById('add-to-cart-from-modal-btn');
        const creditCardForm = document.getElementById('credit-card-form');
        const paymentMethodRadios = document.querySelectorAll('input[name="payment-method"]');
        const customerSupportLink = document.getElementById('customer-support-link');
        const supportModal = document.getElementById('support-modal');
        const closeSupportModalBtn = document.getElementById('close-support-modal');
        const contactTabBtn = document.getElementById('contact-tab-btn');
        const faqTabBtn = document.getElementById('faq-tab-btn');
        const trackingTabBtn = document.getElementById('tracking-tab-btn');
        const contactTabContent = document.getElementById('contact-tab-content');
        const faqTabContent = document.getElementById('faq-tab-content');
        const trackingTabContent = document.getElementById('tracking-tab-content');
        const faqQuestions = document.querySelectorAll('.faq-question');
        const chatbotBubble = document.getElementById('chatbot-bubble');
        const chatbotContainer = document.getElementById('chatbot-container');
        const closeChatbotBtn = document.getElementById('close-chatbot-btn');
        const chatbotForm = document.getElementById('chatbot-form');
        const chatbotInput = document.getElementById('chatbot-input');
        const chatbotMessages = document.getElementById('chatbot-messages');
        const orderTrackingForm = document.getElementById('order-tracking-form');
        const trackingIdInput = document.getElementById('tracking-id-input');
        const trackingResultDiv = document.getElementById('tracking-result');

        const countries = [
            "Afghanistan", "Albania", "Algeria", "Andorra", "Angola", "Antigua and Barbuda", "Argentina", "Armenia", "Australia", "Austria", "Azerbaijan", "Bahamas", "Bahrain", "Bangladesh", "Barbados", "Belarus", "Belgium", "Belize", "Benin", "Bhutan", "Bolivia", "Bosnia and Herzegovina", "Botswana", "Brazil", "Brunei", "Bulgaria", "Burkina Faso", "Burundi", "Cabo Verde", "Cambodia", "Cameroon", "Canada", "Central African Republic", "Chad", "Chile", "China", "Colombia", "Comoros", "Congo, Democratic Republic of the", "Congo, Republic of the", "Costa Rica", "Côte d'Ivoire", "Croatia", "Cuba", "Cyprus", "Czechia", "Denmark", "Djibouti", "Dominica", "Dominican Republic", "Ecuador", "Egypt", "El Salvador", "Equatorial Guinea", "Eritrea", "Estonia", "Eswatini", "Ethiopia", "Fiji", "Finland", "France", "Gabon", "Gambia", "Georgia", "Germany", "Ghana", "Greece", "Grenada", "Guatemala", "Guinea", "Guinea-Bissau", "Guyana", "Haiti", "Honduras", "Hungary", "Iceland", "India", "Indonesia", "Iran", "Iraq", "Ireland", "Israel", "Italy", "Jamaica", "Japan", "Jordan", "Kazakhstan", "Kenya", "Kiribati", "Kosovo", "Kuwait", "Kyrgyzstan", "Laos", "Latvia", "Lebanon", "Lesotho", "Liberia", "Libya", "Liechtenstein", "Lithuania", "Luxembourg", "Madagascar", "Malawi", "Malaysia", "Maldives", "Mali", "Malta", "Marshall Islands", "Mauritania", "Mauritius", "Mexico", "Micronesia", "Moldova", "Monaco", "Mongolia", "Montenegro", "Morocco", "Mozambique", "Myanmar", "Namibia", "Nauru", "Nepal", "Netherlands", "New Zealand", "Nicaragua", "Niger", "Nigeria", "North Korea", "North Macedonia", "Norway", "Oman", "Pakistan", "Palau", "Palestine", "Panama", "Papua New Guinea", "Paraguay", "Peru", "Philippines", "Poland", "Portugal", "Qatar", "Romania", "Russia", "Rwanda", "Saint Kitts and Nevis", "Saint Lucia", "Saint Vincent and the Grenadines", "Samoa", "San Marino", "Sao Tome and Principe", "Saudi Arabia", "Senegal", "Serbia", "Seychelles", "Sierra Leone", "Singapore", "Slovakia", "Slovenia", "Solomon Islands", "Somalia", "South Africa", "South Korea", "South Sudan", "Spain", "Sri Lanka", "Sudan", "Suriname", "Sweden", "Switzerland", "Syria", "Taiwan", "Tajikistan", "Tanzania", "Thailand", "Timor-Leste", "Togo", "Tonga", "Trinidad and Tobago", "Tunisia", "Turkey", "Turkmenistan", "Tuvalu", "Uganda", "Ukraine", "United Arab Emirates", "United Kingdom", "United States", "Uruguay", "Uzbekistan", "Vanuatu", "Vatican City", "Venezuela", "Vietnam", "Yemen", "Zambia", "Zimbabwe"
        ];
        
        function populateCountries() {
            countries.forEach(country => {
                const option = document.createElement('option');
                option.value = country;
                option.textContent = country;
                customerCountrySelect.appendChild(option);
            });
        }
        
        // Function to update the body's overflow style based on all overlay states
        function updateBodyScroll() {
            const isOverlayOpen = cartSidebar.classList.contains('open') || 
                                leftSidebar.classList.contains('open') ||
                                adminModal.classList.contains('open') ||
                                confirmModal.classList.contains('open') ||
                                checkoutModal.classList.contains('open') ||
                                orderConfirmModal.classList.contains('open') ||
                                orderDetailsModal.classList.contains('open') ||
                                productDetailsModal.classList.contains('open') ||
                                supportModal.classList.contains('open');

            if (isOverlayOpen) {
                document.body.style.overflow = 'hidden';
            } else {
                document.body.style.overflow = '';
            }
        }

        // Function to toggle the cart sidebar
        function toggleCartSidebar(open) {
            if (open) {
                cartSidebar.classList.add('open');
                backdrop.classList.add('open');
            } else {
                cartSidebar.classList.remove('open');
                backdrop.classList.remove('open');
            }
            updateBodyScroll();
        }

        // Function to toggle the left menu sidebar
        function toggleLeftSidebar(open) {
            if (open) {
                leftSidebar.classList.add('open');
                backdrop.classList.add('open');
            } else {
                leftSidebar.classList.remove('open');
                backdrop.classList.remove('open');
            }
            updateBodyScroll();
        }

        // Function to toggle the admin login modal
        function toggleAdminModal(open) {
            if (open) {
                adminModal.classList.add('open');
                backdrop.classList.add('open');
            } else {
                adminModal.classList.remove('open');
                backdrop.classList.remove('open');
            }
            updateBodyScroll();
        }

        // Function to toggle the confirmation modal
        function toggleConfirmModal(open) {
            if (open) {
                confirmModal.classList.add('open');
                backdrop.classList.add('open');
            } else {
                confirmModal.classList.remove('open');
                backdrop.classList.remove('open');
            }
            updateBodyScroll();
        }
        
        // Function to toggle the checkout modal
        function toggleCheckoutModal(open) {
            if (open) {
                checkoutModal.classList.add('open');
                backdrop.classList.add('open');
            } else {
                checkoutModal.classList.remove('open');
                backdrop.classList.remove('open');
            }
            updateBodyScroll();
        }
        
        // Function to toggle the order confirmation modal
        function toggleOrderConfirmModal(open) {
            if (open) {
                orderConfirmModal.classList.add('open');
                backdrop.classList.add('open');
            } else {
                orderConfirmModal.classList.remove('open');
                backdrop.classList.remove('open');
            }
            updateBodyScroll();
        }
        
        // Function to toggle the order details modal
        function toggleOrderDetailsModal(open) {
            if (open) {
                orderDetailsModal.classList.add('open');
                backdrop.classList.add('open');
            } else {
                orderDetailsModal.classList.remove('open');
                backdrop.classList.remove('open');
            }
            updateBodyScroll();
        }
        
        // Function to toggle the product details modal
        function toggleProductDetailsModal(open) {
            if (open) {
                productDetailsModal.classList.add('open');
                backdrop.classList.add('open');
            } else {
                productDetailsModal.classList.remove('open');
                backdrop.classList.remove('open');
            }
            updateBodyScroll();
        }
        
        // Function to toggle the customer support modal
        function toggleSupportModal(open) {
            if (open) {
                supportModal.classList.add('open');
                backdrop.classList.add('open');
            } else {
                supportModal.classList.remove('open');
                backdrop.classList.remove('open');
            }
            updateBodyScroll();
        }

        // Function to show/hide dashboard
        function toggleDashboard(show) {
            if (show) {
                mainContent.classList.add('hidden');
                adminDashboard.classList.remove('hidden');
            } else {
                mainContent.classList.remove('hidden');
                adminDashboard.classList.add('hidden');
            }
        }
        
        function switchAdminTab(tab) {
            if (tab === 'products') {
                productsTabBtn.classList.add('text-indigo-600', 'border-indigo-600');
                productsTabBtn.classList.remove('text-gray-500', 'hover:text-indigo-600', 'border-transparent', 'hover:border-indigo-600');
                ordersTabBtn.classList.add('text-gray-500', 'hover:text-indigo-600', 'border-transparent', 'hover:border-indigo-600');
                ordersTabBtn.classList.remove('text-indigo-600', 'border-indigo-600');
                productsTabContent.classList.remove('hidden');
                ordersTabContent.classList.add('hidden');
            } else if (tab === 'orders') {
                ordersTabBtn.classList.add('text-indigo-600', 'border-indigo-600');
                ordersTabBtn.classList.remove('text-gray-500', 'hover:text-indigo-600', 'border-transparent', 'hover:border-indigo-600');
                productsTabBtn.classList.add('text-gray-500', 'hover:text-indigo-600', 'border-transparent', 'hover:border-indigo-600');
                productsTabBtn.classList.remove('text-indigo-600', 'border-indigo-600');
                ordersTabContent.classList.remove('hidden');
                productsTabContent.classList.add('hidden');
                renderAdminOrders();
            }
        }
        
        function switchSupportTab(tab) {
            contactTabBtn.classList.remove('text-indigo-600', 'border-indigo-600');
            faqTabBtn.classList.remove('text-indigo-600', 'border-indigo-600');
            trackingTabBtn.classList.remove('text-indigo-600', 'border-indigo-600');
            
            contactTabBtn.classList.add('text-gray-500', 'hover:text-indigo-600', 'border-transparent', 'hover:border-indigo-600');
            faqTabBtn.classList.add('text-gray-500', 'hover:text-indigo-600', 'border-transparent', 'hover:border-indigo-600');
            trackingTabBtn.classList.add('text-gray-500', 'hover:text-indigo-600', 'border-transparent', 'hover:border-indigo-600');
            
            contactTabContent.classList.add('hidden');
            faqTabContent.classList.add('hidden');
            trackingTabContent.classList.add('hidden');
            
            if (tab === 'contact') {
                contactTabBtn.classList.remove('text-gray-500', 'border-transparent');
                contactTabBtn.classList.add('text-indigo-600', 'border-indigo-600');
                contactTabContent.classList.remove('hidden');
            } else if (tab === 'faq') {
                faqTabBtn.classList.remove('text-gray-500', 'border-transparent');
                faqTabBtn.classList.add('text-indigo-600', 'border-indigo-600');
                faqTabContent.classList.remove('hidden');
            } else if (tab === 'tracking') {
                trackingTabBtn.classList.remove('text-gray-500', 'border-transparent');
                trackingTabBtn.classList.add('text-indigo-600', 'border-indigo-600');
                trackingTabContent.classList.remove('hidden');
            }
        }

        // Function to update dashboard stats
        function updateDashboardStats() {
            totalProductsEl.textContent = products.length;
            const uniqueCategories = new Set(products.map(p => p.category));
            totalCategoriesEl.textContent = uniqueCategories.size;
            totalOrdersEl.textContent = orders.length;
        }

        // Function to render product cards based on filter
        function renderProducts(filterCategory = null) {
            productsGrid.innerHTML = '';
            const filteredProducts = filterCategory
                ? products.filter(p => p.category === filterCategory)
                : products;

            if (filteredProducts.length === 0) {
                productsGrid.innerHTML = '<p class="col-span-full text-center text-gray-500">No products found in this category.</p>';
            } else {
                filteredProducts.forEach(product => {
                    const productCard = document.createElement('div');
                    productCard.className = 'product-card bg-gray-50 rounded-2xl shadow-sm overflow-hidden transform hover:scale-105 transition-transform duration-300 ease-in-out border border-gray-200 cursor-pointer';
                    productCard.dataset.id = product.id;
                    productCard.innerHTML = `
                        <img src="${product.image}" alt="${product.name}" class="w-full h-48 object-cover rounded-t-2xl">
                        <div class="p-4 sm:p-6">
                            <h3 class="text-base font-semibold text-gray-900">${product.name}</h3>
                            <p class="text-sm font-medium text-indigo-600 mt-1">৳${product.price.toFixed(2)}</p>
                        </div>
                    `;
                    productsGrid.appendChild(productCard);
                });
            }

            // Attach event listeners to all product cards
            document.querySelectorAll('.product-card').forEach(card => {
                card.addEventListener('click', (e) => {
                    const productId = parseInt(e.currentTarget.dataset.id);
                    const product = products.find(p => p.id === productId);
                    if (product) {
                        renderProductDetails(product);
                        toggleProductDetailsModal(true);
                    }
                });
            });
        }
        
        // Function to render product details in the modal
        function renderProductDetails(product) {
            productDetailsImage.src = product.image;
            productDetailsImage.alt = product.name;
            productDetailsName.textContent = product.name;
            productDetailsPrice.textContent = `৳${product.price.toFixed(2)}`;
            productDetailsDescription.textContent = product.description;
            addToCartFromModalBtn.dataset.id = product.id;
        }

        // Function to render products in the admin table
        function renderAdminProducts() {
            adminProductsTableBody.innerHTML = '';
            products.forEach(product => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-100 transition-colors';
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap"><img src="${product.image}" alt="${product.name}" class="w-12 h-12 object-cover rounded-lg"></td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${product.name}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${product.category}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">৳${product.price.toFixed(2)}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                        <button data-id="${product.id}" class="edit-btn text-indigo-600 hover:text-indigo-900 transition-colors">Edit</button>
                        <button data-id="${product.id}" class="delete-btn text-red-600 hover:text-red-900 ml-4 transition-colors">Delete</button>
                    </td>
                `;
                adminProductsTableBody.appendChild(row);
            });

            // Attach event listeners to edit and delete buttons
            document.querySelectorAll('.edit-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const productId = parseInt(e.target.dataset.id);
                    const productToEdit = products.find(p => p.id === productId);
                    if (productToEdit) {
                        editingProductId = productId;
                        document.getElementById('product-id').value = productToEdit.id;
                        document.getElementById('product-name').value = productToEdit.name;
                        document.getElementById('product-price').value = productToEdit.price;
                        document.getElementById('product-category').value = productToEdit.category;
                        document.getElementById('product-image').value = productToEdit.image;
                        formTitle.textContent = 'Edit Product';
                        formButton.textContent = 'Update Product';
                    }
                });
            });

            document.querySelectorAll('.delete-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const productId = parseInt(e.target.dataset.id);
                    editingProductId = productId;
                    toggleConfirmModal(true);
                });
            });
        }
        
        // Function to render orders in the admin table
        function renderAdminOrders() {
            adminOrdersTableBody.innerHTML = '';
            orders.forEach(order => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-100 transition-colors';
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${order.id}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${order.customer.name}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">৳${order.total.toFixed(2)}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${order.status === 'Confirmed' ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'}">
                            ${order.status}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                        <button data-id="${order.id}" class="view-order-btn text-indigo-600 hover:text-indigo-900 transition-colors">View Details</button>
                        ${order.status !== 'Confirmed' ? `<button data-id="${order.id}" class="confirm-order-btn text-green-600 hover:text-green-900 ml-4 transition-colors">Confirm</button>` : ''}
                    </td>
                `;
                adminOrdersTableBody.appendChild(row);
            });
            
            // Attach event listeners for order viewing and confirming
            document.querySelectorAll('.view-order-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const orderId = e.target.dataset.id;
                    const order = orders.find(o => o.id === orderId);
                    if (order) {
                        renderOrderDetails(order);
                        toggleOrderDetailsModal(true);
                    }
                });
            });
            
            document.querySelectorAll('.confirm-order-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const orderId = e.target.dataset.id;
                    const order = orders.find(o => o.id === orderId);
                    if (order) {
                        order.status = 'Confirmed';
                        renderAdminOrders();
                    }
                });
            });
        }
        
        // Function to render detailed order information in a modal
        function renderOrderDetails(order) {
            orderDetailsContent.innerHTML = `
                <div class="bg-gray-100 p-4 rounded-xl">
                    <h4 class="font-bold text-lg mb-2">Customer Information</h4>
                    <p class="text-sm"><span class="font-semibold">Name:</span> ${order.customer.name}</p>
                    <p class="text-sm"><span class="font-semibold">Email:</span> ${order.customer.email}</p>
                    <p class="text-sm"><span class="font-semibold">Phone:</span> ${order.customer.phone}</p>
                    <p class="text-sm"><span class="font-semibold">Address:</span> ${order.customer.address}, ${order.customer.country}</p>
                    <p class="text-sm"><span class="font-semibold">Payment Method:</span> ${order.paymentMethod}</p>
                </div>
                <div class="bg-gray-100 p-4 rounded-xl">
                    <h4 class="font-bold text-lg mb-2">Order Items</h4>
                    <ul class="space-y-2">
                        ${order.items.map(item => `
                            <li class="flex items-center gap-4">
                                <img src="${item.image}" alt="${item.name}" class="w-12 h-12 object-cover rounded-lg">
                                <div class="flex-grow">
                                    <p class="text-sm font-medium">${item.name}</p>
                                    <p class="text-xs text-gray-500">৳${item.price.toFixed(2)} x ${item.quantity}</p>
                                </div>
                                <span class="font-bold text-gray-900">৳${(item.price * item.quantity).toFixed(2)}</span>
                            </li>
                        `).join('')}
                    </ul>
                </div>
                <div class="flex justify-between items-center bg-gray-200 p-4 rounded-xl font-bold">
                    <span>Total:</span>
                    <span>৳${order.total.toFixed(2)}</span>
                </div>
                <p class="text-center text-sm mt-4">Order Status: <span class="font-semibold ${order.status === 'Confirmed' ? 'text-green-600' : 'text-yellow-600'}">${order.status}</span></p>
                <div class="text-center mt-4">
                    ${order.status !== 'Confirmed' ? `<button id="confirm-single-order-btn" data-id="${order.id}" class="py-2 px-4 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700">Confirm Order</button>` : ''}
                </div>
            `;
            
            document.getElementById('confirm-single-order-btn')?.addEventListener('click', (e) => {
                const orderId = e.target.dataset.id;
                const order = orders.find(o => o.id === orderId);
                if (order) {
                    order.status = 'Confirmed';
                    renderAdminOrders();
                    toggleOrderDetailsModal(false);
                }
            });
        }

        // Function to add a product to the cart
        function addToCart(product) {
            const existingItem = cart.find(item => item.id === product.id);
            if (existingItem) {
                existingItem.quantity++;
            } else {
                cart.push({ ...product, quantity: 1 });
            }
            renderCartItems();
            toggleCartSidebar(true);
        }

        // Function to remove an item from the cart
        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            renderCartItems();
        }

        // Function to update cart item quantity
        function updateCartQuantity(productId, newQuantity) {
            const item = cart.find(item => item.id === productId);
            if (item) {
                if (newQuantity <= 0) {
                    removeFromCart(productId);
                } else {
                    item.quantity = newQuantity;
                }
            }
            renderCartItems();
        }

        // Function to render cart items and update total
        function renderCartItems() {
            cartItemsContainer.innerHTML = '';
            let total = 0;
            if (cart.length === 0) {
                cartItemsContainer.innerHTML = '<p class="text-gray-500 text-center">Your cart is empty.</p>';
                checkoutButton.disabled = true;
                cartBadge.textContent = '0';
            } else {
                checkoutButton.disabled = false;
                cartBadge.textContent = cart.reduce((acc, item) => acc + item.quantity, 0);
                cart.forEach(item => {
                    total += item.price * item.quantity;
                    const cartItemEl = document.createElement('div');
                    cartItemEl.className = 'flex items-center gap-4 p-3 bg-gray-50 rounded-xl shadow-sm border border-gray-200';
                    cartItemEl.innerHTML = `
                        <img src="${item.image}" alt="${item.name}" class="w-16 h-16 object-cover rounded-lg">
                        <div class="flex-grow">
                            <h4 class="font-medium text-gray-900 text-sm">${item.name}</h4>
                            <p class="text-xs text-gray-600">৳${item.price.toFixed(2)} x ${item.quantity}</p>
                        </div>
                        <div class="flex items-center gap-2">
                            <button data-id="${item.id}" data-action="decrease" class="cart-quantity-btn w-6 h-6 rounded-full bg-gray-200 hover:bg-gray-300 text-gray-800 flex items-center justify-center font-bold text-lg leading-none">-</button>
                            <span class="text-sm font-semibold">${item.quantity}</span>
                            <button data-id="${item.id}" data-action="increase" class="cart-quantity-btn w-6 h-6 rounded-full bg-indigo-600 hover:bg-indigo-700 text-white flex items-center justify-center font-bold text-lg leading-none">+</button>
                            <button data-id="${item.id}" data-action="remove" class="remove-from-cart-btn p-1 ml-2 rounded-full text-red-500 hover:text-red-700 transition-colors">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                  <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm6 0a1 1 0 012 0v6a1 1 0 11-2 0V8z" clip-rule="evenodd" />
                                </svg>
                            </button>
                        </div>
                    `;
                    cartItemsContainer.appendChild(cartItemEl);
                });

                // Attach event listeners for cart quantity buttons and remove buttons
                document.querySelectorAll('.cart-quantity-btn').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const productId = parseInt(e.target.dataset.id);
                        const action = e.target.dataset.action;
                        const item = cart.find(item => item.id === productId);
                        if (item) {
                            if (action === 'increase') {
                                updateCartQuantity(productId, item.quantity + 1);
                            } else if (action === 'decrease') {
                                updateCartQuantity(productId, item.quantity - 1);
                            }
                        }
                    });
                });

                document.querySelectorAll('.remove-from-cart-btn').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const productId = parseInt(e.target.dataset.id);
                        removeFromCart(productId);
                    });
                });
            }
            cartTotal.textContent = `৳${total.toFixed(2)}`;
        }

        // Add a new message to the chatbot conversation
        function addChatMessage(message, sender) {
            const messageEl = document.createElement('div');
            messageEl.classList.add('chatbot-message', 'p-3', 'max-w-[80%]', 'rounded-xl', 'text-sm');
            messageEl.classList.add(sender === 'user' ? 'user' : 'bot');
            messageEl.innerHTML = message;
            chatbotMessages.appendChild(messageEl);
            chatbotMessages.scrollTop = chatbotMessages.scrollHeight; // Auto-scroll to the latest message
        }
        
        // Handle chatbot responses
        function handleChatbotResponse(input) {
            const normalizedInput = input.toLowerCase().trim();
            let response = "I'm sorry, I don't understand that. You can ask me about **orders**, **returns**, or type **'live agent'** for more help.";

            if (normalizedInput.includes('hello') || normalizedInput.includes('hi')) {
                response = "Hello! How can I help you today?";
            } else if (normalizedInput.includes('order') || normalizedInput.includes('track') || normalizedInput.includes('status')) {
                response = "To track your order, please use the Order Tracking page in the Customer Support section of the menu. You'll need your order ID to check the status.";
            } else if (normalizedInput.includes('return') || normalizedInput.includes('policy')) {
                response = "Our return policy allows for returns within 30 days of purchase. For details, please visit the **Order Tracking & Returns** tab in the Customer Support section of the menu.";
            } else if (normalizedInput.includes('live agent') || normalizedInput.includes('human')) {
                response = "This is a simulated chat. For real help, please use the **Contact Us** form in the customer support menu. We will notify a member of our staff to contact you by email as soon as possible!";
            }
            
            setTimeout(() => {
                addChatMessage(response, 'bot');
            }, 500);
        }
        
        // Initial rendering of products and event listeners
        document.addEventListener('DOMContentLoaded', () => {
            renderProducts();
            renderCartItems();
            populateCountries();
            switchSupportTab('tracking');

            // Event listeners for the sidebars
            cartIcon.addEventListener('click', () => toggleCartSidebar(true));
            closeCartBtn.addEventListener('click', () => toggleCartSidebar(false));
            menuIcon.addEventListener('click', () => toggleLeftSidebar(true));
            closeMenuBtn.addEventListener('click', () => toggleLeftSidebar(false));
            backdrop.addEventListener('click', () => {
                toggleCartSidebar(false);
                toggleLeftSidebar(false);
                toggleAdminModal(false);
                toggleConfirmModal(false);
                toggleCheckoutModal(false);
                toggleOrderConfirmModal(false);
                toggleOrderDetailsModal(false);
                toggleProductDetailsModal(false);
                toggleSupportModal(false);
            });
            
            // Checkout process
            checkoutButton.addEventListener('click', () => {
                toggleCartSidebar(false);
                toggleCheckoutModal(true);
            });
            
            closeCheckoutModal.addEventListener('click', () => toggleCheckoutModal(false));
            closeOrderConfirmModal.addEventListener('click', () => toggleOrderConfirmModal(false));
            closeOrderDetailsModal.addEventListener('click', () => toggleOrderDetailsModal(false));
            closeProductDetailsModal.addEventListener('click', () => toggleProductDetailsModal(false));
            
            checkoutForm.addEventListener('submit', (e) => {
                e.preventDefault();
                
                if (cart.length === 0) {
                    toggleCheckoutModal(false);
                    return;
                }
                
                const customerInfo = {
                    name: document.getElementById('customer-name').value,
                    email: document.getElementById('customer-email').value,
                    phone: document.getElementById('customer-phone').value,
                    address: document.getElementById('customer-address').value,
                    country: document.getElementById('customer-country').value,
                };
                
                const paymentMethod = document.querySelector('input[name="payment-method"]:checked').value;
                
                const orderTotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                const newOrderId = `ORD-${String(++lastOrderId).padStart(3, '0')}`;
                
                const newOrder = {
                    id: newOrderId,
                    customer: customerInfo,
                    items: [...cart],
                    total: orderTotal,
                    status: 'Pending',
                    paymentMethod: paymentMethod,
                    date: new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' })
                };
                
                orders.unshift(newOrder); // Add to the beginning of the array
                cart = []; // Clear the cart
                renderCartItems(); // Update cart display
                checkoutForm.reset(); // Clear the form
                toggleCheckoutModal(false); // Close the checkout modal
                
                // Show order confirmation modal
                orderSummaryEl.innerHTML = `
                    <p class="text-sm"><span class="font-semibold">Order ID:</span> ${newOrder.id}</p>
                    <p class="text-sm"><span class="font-semibold">Name:</span> ${newOrder.customer.name}</p>
                    <p class="text-sm"><span class="font-semibold">Email:</span> ${newOrder.customer.email}</p>
                    <p class="text-sm"><span class="font-semibold">Total:</span> ৳${newOrder.total.toFixed(2)}</p>
                    <p class="text-sm"><span class="font-semibold">Payment Method:</span> ${newOrder.paymentMethod}</p>
                `;
                toggleOrderConfirmModal(true);
            });
            
            // Show/hide credit card form based on radio button selection
            paymentMethodRadios.forEach(radio => {
                radio.addEventListener('change', (e) => {
                    if (e.target.value === 'credit-card') {
                        creditCardForm.classList.remove('hidden');
                    } else {
                        creditCardForm.classList.add('hidden');
                    }
                });
            });

            // Add to cart from product details modal
            addToCartFromModalBtn.addEventListener('click', (e) => {
                const productId = parseInt(e.currentTarget.dataset.id);
                const productToAdd = products.find(p => p.id === productId);
                if (productToAdd) {
                    addToCart(productToAdd);
                    toggleProductDetailsModal(false);
                }
            });

            // Event listener for category navigation links
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const filter = e.currentTarget.dataset.filter;
                    if (filter === 'all') {
                        renderProducts();
                    } else {
                        renderProducts(filter);
                    }
                    toggleLeftSidebar(false);
                    toggleDashboard(false); // Make sure dashboard is hidden
                });
            });

            // Admin dashboard logic
            adminDashboardLink.addEventListener('click', (e) => {
                e.preventDefault();
                toggleLeftSidebar(false);
                toggleAdminModal(true);
            });

            closeAdminModal.addEventListener('click', () => {
                toggleAdminModal(false);
                loginError.classList.add('hidden');
            });

            adminLoginForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const password = adminPasswordInput.value;
                const correctPassword = 'admin123';
                if (password === correctPassword) {
                    toggleAdminModal(false);
                    toggleDashboard(true);
                    updateDashboardStats();
                    renderAdminProducts();
                    adminPasswordInput.value = '';
                    loginError.classList.add('hidden');
                    switchAdminTab('products'); // Default to products tab
                } else {
                    loginError.classList.remove('hidden');
                }
            });
            
            // Admin tab switching
            productsTabBtn.addEventListener('click', () => switchAdminTab('products'));
            ordersTabBtn.addEventListener('click', () => switchAdminTab('orders'));

            logoutBtn.addEventListener('click', () => {
                toggleDashboard(false);
                renderProducts(); // Re-render all products for the customer view
            });

            productForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const productId = document.getElementById('product-id').value;
                const productName = document.getElementById('product-name').value;
                const productPrice = parseFloat(document.getElementById('product-price').value);
                const productCategory = document.getElementById('product-category').value;
                const productImage = document.getElementById('product-image').value;

                if (productId) {
                    // Update existing product
                    const index = products.findIndex(p => p.id == productId);
                    if (index !== -1) {
                        products[index] = {
                            id: products[index].id,
                            name: productName,
                            price: productPrice,
                            category: productCategory,
                            image: productImage,
                            description: products[index].description
                        };
                    }
                    // Reset form to Add mode
                    editingProductId = null;
                    formTitle.textContent = 'Add New Product';
                    formButton.textContent = 'Add Product';
                } else {
                    // Add new product
                    const newProduct = {
                        id: products.length > 0 ? Math.max(...products.map(p => p.id)) + 1 : 1,
                        name: productName,
                        price: productPrice,
                        category: productCategory,
                        image: productImage,
                        description: 'A newly added product.'
                    };
                    products.push(newProduct);
                }
                
                productForm.reset();
                renderProducts(); // Re-render the customer view
                renderAdminProducts(); // Re-render the admin view
                updateDashboardStats();
            });

            // Confirm delete logic
            confirmDeleteBtn.addEventListener('click', () => {
                products = products.filter(p => p.id !== editingProductId);
                toggleConfirmModal(false);
                renderProducts();
                renderAdminProducts();
                updateDashboardStats();
            });

            cancelDeleteBtn.addEventListener('click', () => {
                toggleConfirmModal(false);
            });
            
            // Customer Support Modal logic
            customerSupportLink.addEventListener('click', (e) => {
                e.preventDefault();
                toggleLeftSidebar(false);
                toggleSupportModal(true);
            });
            
            closeSupportModalBtn.addEventListener('click', () => {
                toggleSupportModal(false);
            });

            contactTabBtn.addEventListener('click', () => switchSupportTab('contact'));
            faqTabBtn.addEventListener('click', () => switchSupportTab('faq'));
            trackingTabBtn.addEventListener('click', () => switchSupportTab('tracking'));

            faqQuestions.forEach(button => {
                button.addEventListener('click', () => {
                    const answer = button.nextElementSibling;
                    const plusIcon = button.querySelector('span:last-child');
                    answer.classList.toggle('hidden');
                    if (answer.classList.contains('hidden')) {
                        plusIcon.textContent = '+';
                    } else {
                        plusIcon.textContent = '-';
                    }
                });
            });
            
            // Order tracking form
            orderTrackingForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const trackingId = trackingIdInput.value.toUpperCase().trim();
                const order = orders.find(o => o.id === trackingId);
                const resultDiv = document.getElementById('tracking-result');
                resultDiv.classList.remove('hidden');
                
                if (order) {
                    resultDiv.innerHTML = `
                        <h4 class="font-bold text-green-600 mb-2">Order Found!</h4>
                        <p class="text-sm">Order ID: <span class="font-semibold">${order.id}</span></p>
                        <p class="text-sm">Status: <span class="font-semibold ${order.status === 'Confirmed' ? 'text-green-600' : 'text-yellow-600'}">${order.status}</span></p>
                        <p class="text-sm">Total: <span class="font-semibold">৳${order.total.toFixed(2)}</span></p>
                        <p class="text-sm">Customer: <span class="font-semibold">${order.customer.name}</span></p>
                    `;
                } else {
                    resultDiv.innerHTML = `
                        <h4 class="font-bold text-red-600 mb-2">Order Not Found</h4>
                        <p class="text-sm">Please check your Order ID and try again.</p>
                    `;
                }
            });

            // Chatbot logic
            chatbotBubble.addEventListener('click', () => {
                chatbotContainer.classList.toggle('open');
            });
            
            closeChatbotBtn.addEventListener('click', () => {
                chatbotContainer.classList.remove('open');
            });

            chatbotForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const userMessage = chatbotInput.value.trim();
                if (userMessage) {
                    addChatMessage(userMessage, 'user');
                    handleChatbotResponse(userMessage);
                    chatbotInput.value = '';
                }
            });
        });
    </script>

</body>
</html>
